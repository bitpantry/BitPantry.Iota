@model CardModel

<h1 class="display-6 mt-5">@Model.Address</h1>

<div class="mt-4">
    <partial name="_PassagePartial" model='@Model.Passage' />
</div>

<div class="d-flex mt-5 flex-row">
    <div>
        @if(Model.Tab == BitPantry.Iota.Common.Tab.Queue)
        {
            <a href="#" data-testid="card.maint.btnStartNow" onclick="confirmStartNow()" class="btn btn-secondary px-3">
                Start Now
            </a>
        }
        else
        {
            <a href="#" data-testid="card.maint.btnSendBackToQueue" onclick="confirmSendBackToQueue()" class="btn btn-secondary px-3">
                Send Back to Queue
            </a>
        }
    </div>
    <div class="ps-2">
        <a href="#" data-testid="card.maint.btnDelete" onclick="confirmDelete()" class="btn btn-danger px-3">
            Delete
        </a>
        <a data-testid="card.maint.btnTest" asp-action="Test" asp-route-id="@Model.Id" class="btn btn-danger px-3">
            Test
        </a>
    </div>
</div>

<!-- DELETE Confirmation dialog markup -->

<div id="deleteConfirmationModal" data-testid="card.maint.diaConfirmDelete" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Are you sure?</h5>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this card?</p>
                <p class="fw-bold fs-5">@Model.Passage.Address</p>
            </div>
            <div class="modal-footer">
                <button type="button" data-testid="card.maint.btnConfirmDeleteCancel" class="btn btn-secondary" data-dismiss="modal" onclick="cancelDelete()">Cancel</button>
                <a asp-action="Delete" asp-controller="Card" asp-route-id="@Model.Id" data-testid="card.maint.btnConfirmDelete" class="btn btn-danger">Delete</a>
            </div>
        </div>
    </div>
</div>

<!-- START NOW Confirmation dialog markup -->

<div id="startNowConfirmationModal" data-testid="card.maint.diaConfirmStartNow" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Start memorizing now?</h5>
            </div>
            <div class="modal-body">
                <p>The card in the daily tab will be returned to the top of the queue, and you'll begin memorizing this card now.</p>
                <p class="fw-bold fs-5">@Model.Passage.Address</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-testid="card.maint.btnConfirmStartNowCancel" data-dismiss="modal" onclick="cancelStartNow()">Cancel</button>
                <a asp-action="StartNow" asp-controller="Card" asp-route-id="@Model.Id" data-testid="card.maint.btnConfirmStartNow" class="btn btn-primary">Ok</a>
            </div>
        </div>
    </div>
</div>

<!-- SEND BACK TO QUEUE Confirmation dialog markup -->

<div id="sendBackToQueueConfirmationModal" data-testid="card.maint.diaConfirmSendToQueue" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Are you sure?</h5>
            </div>
            <div class="modal-body">
                <p>This card's review progress will be reset and it will be moved to the bottom of the queue.</p>
                <p class="fw-bold fs-5">@Model.Passage.Address</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" data-testid="card.maint.btnConfirmSendToQueueCancel" onclick="cancelSendBackToQueue()">Cancel</button>
                <a asp-action="SendBackToQueue" asp-controller="Card" asp-route-id="@Model.Id" data-testid="card.maint.btnConfirmSendToQueue" class="btn btn-primary">Ok</a>
            </div>
        </div>
    </div>
</div>

<script>
    function confirmDelete() {
        $('#deleteConfirmationModal').modal('show');
    }

    function cancelDelete() {
        $('#deleteConfirmationModal').modal('hide');
    }

    function confirmStartNow() {
        $('#startNowConfirmationModal').modal('show');
    }

    function cancelStartNow() {
        $('#startNowConfirmationModal').modal('hide');
    }

    function confirmSendBackToQueue() {
        $('#sendBackToQueueConfirmationModal').modal('show');
    }

    function cancelSendBackToQueue() {
        $('#sendBackToQueueConfirmationModal').modal('hide');
    }
</script>