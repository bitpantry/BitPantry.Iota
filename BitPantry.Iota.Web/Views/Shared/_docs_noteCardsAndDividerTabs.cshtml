@using BitPantry.Iota.Common

<p class="display-6">Note Cards and Divider Tabs</p>

<p>
    This system uses the concepts of cards (as in note cards) and tabs (think divider tabs) to help you memorize scripture.
</p>

<p class="mb-4">
    Imagine you have a note card box with 42 tabs. When you want to memorize a new passage of scripture, you write it on a note card and organize it into this box.
    The tabs determine how often you review each card and how the cards advance through the system. 
</p>

<p><strong>
        <i>Click on the tabs below to learn how they work.</i>
</strong></p>

<div class="bd-example">

    <div>

        <!-- tabs -->
        <ul class="nav nav-tabs nav-justified mt-5 w-100 main-tabs">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="queueTab" data-bs-toggle="tab" data-bs-target="#queueTabContent" data-tab-info="@Tab.Queue" type="button" role="tab" aria-controls="queueTabContent">Queue</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="dailyTab" data-bs-toggle="tab" data-bs-target="#dailyTabContent" data-tab-info="@Tab.Daily" type="button" role="tab" aria-controls="dailyTabContent">Daily</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="oddTab" data-bs-toggle="tab" data-bs-target="#oddTabContent" data-tab-info="@Tab.Odd" type="button" role="tab" aria-controls="oddTabContent">Odd</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="evenTab" data-bs-toggle="tab" data-bs-target="#evenTabContent" data-tab-info="@Tab.Even" type="button" role="tab" aria-controls="evenTabContent">Even</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="weekTab" data-bs-toggle="tab" data-bs-target="#weekTabContent" data-tab-info="Week" type="button" role="tab" aria-controls="weeklyTabContent">Week</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="monthTab" data-bs-toggle="tab" data-bs-target="#monthTabContent" data-tab-info="Month" type="button" role="tab" aria-controls="monthTabContent">Date</a>
            </li>
        </ul>

        <!-- tab contents -->
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade active show" id="queueTabContent" role="tabpanel" aria-labelledby="queueTab">
                <div class="mt-3 mx-3">
                    <p>
                        The Queue tab is for <strong>cards you want to memorize, but haven't started working on yet</strong>. When you create a new card, it's added here. 
                        Cards from the Queue are <strong>moved to the Daily tab when you're ready to memorize them.</strong>
                    </p>
                </div>
            </div>
            <div class="tab-pane fade" id="dailyTabContent" role="tabpanel" aria-labelledby="dailyTab">
                <div class="mt-3 mx-3">
                    <p>
                        The Daily tab is for <strong>the cards you're currently working to memorize</strong>. As the tab name indicates, you'll <strong>review these cards every day</strong>. Once you
                        feel like you have a card down, you'll advance this card to another tab (more on this later). The cards in the Daily tab are <strong>moved to the Odd or Even tab once you feel like you have them memorized.</strong>
                    </p>
                </div>
            </div>
            <div class="tab-pane fade" id="oddTabContent" role="tabpanel" aria-labelledby="oddTab">
                <div class="mt-3 mx-3">
                    <p>
                        The Odd tab is for <strong>cards you've recently memorized and still need to review freqently</strong>.
                        You'll <strong>review these cards on odd days of the month</strong>. Over time, Odd cards are <strong>moved to a Day of the Week tab.</strong>
                    </p>
                </div>
            </div>
            <div class="tab-pane fade" id="evenTabContent" role="tabpanel" aria-labelledby="evenTab">
                <div class="mt-3 mx-3">
                    <p>
                        The Even tab is for <strong>cards you've recently memorized and still need to review freqently</strong>.
                        You'll <strong>review these cards on even days of the month</strong>. Over time, Even cards are <strong>moved to a Day of the Week tab.</strong>
                    </p>
                </div>
            </div>
            <div class="tab-pane fade" id="weekTabContent" role="tabpanel" aria-labelledby="weekTab">
                <nav class="nav py-3" style="border-bottom: 1px solid #DEDEDE;">
                    @foreach (var day in new[] { "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" })
                    {
                        <a id="@day.ToLower()Tab" class="nav-link" data-tab-info="@day" href="#">@day</a>
                    }
                </nav>
                <div class="mt-3 mx-3">
                    <p>
                        The Week tab is really 7 tabs - one for each day of the week. These tabs are for <strong>cards you feel good about, but still need to review regularly</strong> to make sure they stay sharp.
                        You'll <strong>review these cards once a week</strong> on the day represented by the tab. Over time,
                        cards in the Day of the Week tabs are <strong>moved to a Day of the Month tab.</strong>
                    </p>
                </div>
            </div>
            <div class="tab-pane fade" id="monthTabContent" role="tabpanel" aria-labelledby="monthTab">
                <nav class="nav py-3" style="border-bottom: 1px solid #DEDEDE;">
                    @for (int i = 1; i <= 31; i++)
                    {
                        <a id="@($"day{i}Tab")" class="nav-link" data-tab-info="@($"Day{i}")" href="#">@i</a>
                    }
                </nav>
                <div class="mt-3 mx-3">
                    <p>
                        The Month tab is really 31 tabs - one for each day of the month. These tabs are for <strong>cards you have memorized and only need to review occasionally</strong>.
                        You'll <strong>review these cards once a month</strong> on the day represented by the tab. Of course, there aren't
                        always 31 days in each month, so you'll want to move the cards you know best to tabs 29, 30, and 31. Cards in a Day of the Month tab <strong>don't move out to other tabs</strong>, they stay here and are reviewed
                        each month.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<p class="mt-3">
    Even though you can have many cards in each tab, it's best to try to focus on only a few cards in the Daily, Odd, Even, and Week tabs. This helps focus your review time and ensures you can get through your daily review in just a few minutes.
</p>

<script>
    document.addEventListener('DOMContentLoaded', function () {

        // Activate a nested tab within a content area
        function activateNestedTab(nestedTab) {
            nestedTab.closest(".nav").querySelectorAll(".nav-link").forEach(link => link.classList.remove("active"));
            nestedTab.classList.add("active");
        }

        // Nested Tab Event Listeners for Week and Month
        document.querySelectorAll('#weekTabContent .nav-link, #monthTabContent .nav-link').forEach(tab => {
            tab.addEventListener('click', function (event) {
                event.preventDefault();
                const tabInfo = event.target.getAttribute('data-tab-info');

                // Track the last selected nested tab for Week or Month
                if (event.target.closest('#weekTabContent')) lastSelectedWeekTab = tab;
                else if (event.target.closest('#monthTabContent')) lastSelectedMonthTab = tab;

                activateNestedTab(tab);
                updateMoveToButton(tabInfo);
            });
        });

        activateNestedTab(document.getElementById("sundayTab"));
        activateNestedTab(document.getElementById("day1Tab"));

    });
</script>
